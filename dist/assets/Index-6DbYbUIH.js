import{_ as de}from"./AdminLayout.vue_vue_type_script_setup_true_lang-DSm9cKQI.js";
import{d as Q,M as W,E as U,i,j as o,b as n,e as l,u as t,g as u,h as d,l as m,F as k,k as C,t as f,f as A,H as X,N as Y,m as R,r as S,s as Z}from"./app-BNk5Tten.js";import{_ as E}from"./Badge.vue_vue_type_script_setup_true_lang-Dc_7hQKm.js";import{_ as w}from"./Button.vue_vue_type_script_setup_true_lang-PhlT1jFQ.js";import{_ as O}from"./CardDescription.vue_vue_type_script_setup_true_lang-B2kVuMIi.js";
import{_ as P,a as j,b as L,c as D}from"./CardTitle.vue_vue_type_script_setup_true_lang-C5sOiAJg.js";import{P as ee,a as te,T as se,_ as re,b as le,c as oe,d as ae,e as ie}from"./DialogTitle.vue_vue_type_script_setup_true_lang-Doa_Cajc.js";import{_ as b}from"./Input.vue_vue_type_script_setup_true_lang-DnkyBbgT.js";import{_ as v}from"./Label.vue_vue_type_script_setup_true_lang-kFjkqwHs.js";import"./Primitive-CjWR7Ema.js";import"./button-B3GKAfbB.js";import"./badge-CYwMBmzJ.js";import"./index-sF3JAlrh.js";import"./useForwardPropsEmits-kFya-Fyw.js";import"./SheetContent.vue_vue_type_script_setup_true_lang-BMW_SBM-.js";import"./useForwardExpose-Bt4yM_YF.js";import"./Presence-CC9Lr9XA.js";import"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-B_UKhnTo.js";import"./input-1cBh28RH.js";import"./floating-ui.dom-XjuzL8W_.js";import"./VisuallyHidden-BhwQ6HL5.js";import"./useDirection-BfowJ6Bm.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./avatar-C-rXcHc7.js";import"./index-MR6zpLVp.js";import"./index-B3J4LzN3.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-v8Z3VU-x.js";import"./layers-CvXSMrWT.js";import"./phone-tNkuiWIL.js";const ne={class:"flex flex-col gap-6 p-6"},ue={class:"flex flex-wrap items-center justify-between gap-4"},me={class:"overflow-x-auto"},fe={class:"w-full text-left text-sm"},ce={key:0},pe={class:"px-4 py-3"},_e={class:"font-medium text-foreground"},ge={key:0,class:"mt-1 text-xs text-muted-foreground"},ve={class:"px-4 py-3"},ye={class:"px-4 py-3 text-muted-foreground"},xe={class:"px-4 py-3 text-muted-foreground"},be={class:"px-4 py-3"},he={class:"flex flex-col gap-1 text-xs"},ke=["href"],we=["href"],Ce={key:2,class:"text-muted-foreground"},Se={class:"px-4 py-3"},Ve={class:"flex items-center gap-2 text-xs text-muted-foreground"},$e={key:0,class:"flex items-center gap-1"},Ue={key:1,class:"flex items-center gap-1"},Ae={key:2},Re={class:"px-4 py-3"},Ee={class:"flex justify-end gap-2"},Pe={class:"flex flex-col gap-4"},je={class:"space-y-2"},Le={key:0,class:"text-sm text-destructive"},De={class:"space-y-2"},Oe={key:0,class:"text-sm text-destructive"},Ie={class:"space-y-2"},Fe={key:0,class:"text-sm text-destructive"},Me={class:"space-y-2"},Ne={key:0,class:"text-sm text-destructive"},Be={class:"space-y-2"},Ge={key:0,class:"text-sm text-destructive"},Te={key:1,class:"text-xs text-muted-foreground"},qe=["href"],ze={class:"space-y-2"},He={key:0,class:"text-sm text-destructive"},Je={key:1,class:"text-xs text-muted-foreground"},Ke=["href"],Qe={class:"space-y-2"},We={key:0,class:"text-sm text-destructive"},Xe={key:1,class:"space-y-2 rounded-md border p-3"},Ye={class:"grid grid-cols-3 gap-2"},Ze=["src","alt"],et={key:1,class:"flex h-20 w-full items-center justify-center bg-muted text-xs text-muted-foreground"},tt=["onClick"],st={key:2,class:"space-y-2 rounded-md border border-dashed p-3"},rt={class:"grid grid-cols-3 gap-2"},lt=["src","alt"],ot={class:"space-y-2"},at=["value"],it={key:0,class:"text-sm text-destructive"},dt={key:0},nt={key:1},Mt=Q({__name:"Index",props:{posts:{}},setup(I){const F=I,V=R(()=>{const a=F.posts;return Array.isArray(a)?a:a&&Array.isArray(a.data)?a.data:[]}),M=R(()=>[{title:"Admin",href:"/admin"},{title:"Blog"}]),h=S(!1),p=S(null),s=W({title:"",summary:"",reading_time:"5 min",status:"Draft",published_at:new Date().toISOString().slice(0,10),cover_image:null,feature_video:null,gallery:[],gallery_remove:[]}),N=["Published","Draft"],y=S([]),_=S([]);function B(){p.value=null,s.reset(),s.clearErrors(),s.status="Draft",s.published_at=new Date().toISOString().slice(0,10),s.cover_image=null,s.feature_video=null,s.gallery=[],s.gallery_remove=[],y.value=[],_.value.forEach(a=>URL.revokeObjectURL(a.url)),_.value=[],h.value=!0}function G(a){p.value=a,s.reset(),s.clearErrors(),s.title=a.title,s.summary=a.summary??"",s.reading_time=a.reading_time??"",s.status=a.status,s.published_at=a.published_at??new Date().toISOString().slice(0,10),s.cover_image=null,s.feature_video=null,s.gallery=[],s.gallery_remove=[],y.value=Array.isArray(a.gallery)?[...a.gallery]:[],_.value.forEach(e=>URL.revokeObjectURL(e.url)),_.value=[],h.value=!0}function T(){const a={...s.data()},e={preserveScroll:!0,onSuccess:()=>$(),forceFormData:!0},x=()=>{const c={...a};return s.cover_image||delete c.cover_image,s.feature_video||delete c.feature_video,s.gallery.length||delete c.gallery,s.gallery_remove.length||delete c.gallery_remove,c};p.value?s.transform(x).put(`/admin/blog/${p.value.id}`,e):s.transform(x).post("/admin/blog",e)}function q(a){confirm(`Remove “${a.title}”?`)&&Z.delete(`/admin/blog/${a.id}`,{preserveScroll:!0})}function $(){h.value=!1,s.reset(),s.clearErrors(),p.value=null,y.value=[],_.value.forEach(a=>URL.revokeObjectURL(a.url)),_.value=[]}function z(a){const e=a.target;s.cover_image=e.files?.[0]??null}function H(a){const e=a.target;s.feature_video=e.files?.[0]??null}function J(a){const e=a.target,x=Array.from(e.files??[]);s.gallery=x,_.value.forEach(c=>URL.revokeObjectURL(c.url)),_.value=x.map(c=>({name:c.name,url:URL.createObjectURL(c)}))}function K(a){s.gallery_remove.includes(a)||(s.gallery_remove.push(a),y.value=y.value.filter(e=>e.id!==a))}return(a,e)=>{const x=U("ImageIcon"),c=U("Video");return d(),i(k,null,[o(de,{breadcrumbs:M.value},{default:n(()=>[l("div",ne,[l("div",ue,[l("div",null,[o(t(E),{variant:"secondary",class:"mb-2 w-fit"},{default:n(()=>[...e[6]||(e[6]=[u("Blog",-1)])]),_:1}),e[7]||(e[7]=l("h1",{class:"text-3xl font-semibold tracking-tight"},"Editorial workflow",-1)),e[8]||(e[8]=l("p",{class:"text-sm text-muted-foreground"}," Manage published insights and prepare upcoming articles. ",-1))]),o(t(w),{onClick:B},{default:n(()=>[o(t(ee),{class:"h-4 w-4"}),e[9]||(e[9]=u(" Add post ",-1))]),_:1})]),o(t(P),null,{default:n(()=>[o(t(j),{class:"pb-4"},{default:n(()=>[o(t(L),{class:"text-base"},{default:n(()=>[...e[10]||(e[10]=[u("Editorial catalogue",-1)])]),_:1}),o(t(O),null,{default:n(()=>[...e[11]||(e[11]=[u("Published posts appear on the public blog immediately after saving.",-1)])]),_:1})]),_:1}),o(t(D),{class:"p-0"},{default:n(()=>[l("div",me,[l("table",fe,[e[15]||(e[15]=l("thead",{class:"border-b bg-muted/50 text-xs uppercase text-muted-foreground"},[l("tr",null,[l("th",{class:"px-4 py-3 font-medium"},"Title"),l("th",{class:"px-4 py-3 font-medium"},"Status"),l("th",{class:"px-4 py-3 font-medium"},"Publish date"),l("th",{class:"px-4 py-3 font-medium"},"Reading time"),l("th",{class:"px-4 py-3 font-medium"},"Media"),l("th",{class:"px-4 py-3 font-medium"},"Gallery"),l("th",{class:"px-4 py-3 font-medium text-right"},"Actions")])],-1)),l("tbody",null,[V.value.length===0?(d(),i("tr",ce,[...e[12]||(e[12]=[l("td",{colspan:"7",class:"px-4 py-6 text-center text-sm text-muted-foreground"}," No posts yet. Add your first article to populate the public blog. ",-1)])])):m("",!0),(d(!0),i(k,null,C(V.value,r=>(d(),i("tr",{key:r.id,class:"border-b last:border-0"},[l("td",pe,[l("div",_e,f(r.title.length>25?r.title.substring(0,25)+"...":r.title),1),r.summary?(d(),i("p",ge,f(r.summary.length>25?r.summary.substring(0,25)+"...":r.summary),1)):m("",!0)]),l("td",ve,[o(t(E),{variant:r.status==="Published"?"default":"outline"},{default:n(()=>[u(f(r.status),1)]),_:2},1032,["variant"])]),l("td",ye,f(r.published??"Unscheduled"),1),l("td",xe,f(r.reading_time??"—"),1),l("td",be,[l("div",he,[r.cover_image_url?(d(),i("a",{key:0,href:r.cover_image_url,target:"_blank",rel:"noreferrer",class:"text-primary hover:underline"}," View cover ",8,ke)):m("",!0),r.feature_video_url?(d(),i("a",{key:1,href:r.feature_video_url,target:"_blank",rel:"noreferrer",class:"text-primary hover:underline"}," View video ",8,we)):m("",!0),!r.cover_image_url&&!r.feature_video_url?(d(),i("span",Ce,"—")):m("",!0)])]),l("td",Se,[l("div",Ve,[Array.isArray(r.gallery)&&r.gallery.length?(d(),i("div",$e,[o(x,{class:"h-3.5 w-3.5"}),u(" "+f(r.gallery.filter(g=>g.kind==="image").length),1)])):m("",!0),Array.isArray(r.gallery)&&r.gallery.some(g=>g.kind==="video")?(d(),i("div",Ue,[o(c,{class:"h-3.5 w-3.5"}),u(" "+f(r.gallery.filter(g=>g.kind==="video").length),1)])):m("",!0),!Array.isArray(r.gallery)||!r.gallery.length?(d(),i("span",Ae,"—")):m("",!0)])]),l("td",Re,[l("div",Ee,[o(t(w),{variant:"ghost",size:"sm",onClick:g=>G(r)},{default:n(()=>[o(t(te),{class:"h-4 w-4"}),e[13]||(e[13]=u(" Edit ",-1))]),_:1},8,["onClick"]),o(t(w),{variant:"ghost",size:"sm",onClick:g=>q(r)},{default:n(()=>[o(t(se),{class:"h-4 w-4"}),e[14]||(e[14]=u(" Remove ",-1))]),_:1},8,["onClick"])])])]))),128))])])])]),_:1})]),_:1}),o(t(P),null,{default:n(()=>[o(t(j),null,{default:n(()=>[o(t(L),{class:"text-base"},{default:n(()=>[...e[16]||(e[16]=[u("Publishing checklist",-1)])]),_:1}),o(t(O),null,{default:n(()=>[...e[17]||(e[17]=[u(" Ensure each article has a clear summary, accurate publish date, and review notes before going live. ",-1)])]),_:1})]),_:1}),o(t(D),{class:"text-sm text-muted-foreground"},{default:n(()=>[...e[18]||(e[18]=[l("p",null," Hook the form into your Laravel controllers to persist draft and publish state. For Markdown content, add a dedicated field and file upload workflow when ready. ",-1)])]),_:1})]),_:1})])]),_:1},8,["breadcrumbs"]),o(t(ie),{open:h.value,"onUpdate:open":e[5]||(e[5]=r=>h.value=r)},{default:n(()=>[o(t(re),null,{default:n(()=>[o(t(le),null,{default:n(()=>[o(t(oe),null,{default:n(()=>[u(f(p.value?"Edit post":"Add post"),1)]),_:1})]),_:1}),l("div",Pe,[l("div",je,[o(t(v),{for:"post-title"},{default:n(()=>[...e[19]||(e[19]=[u("Title",-1)])]),_:1}),o(t(b),{id:"post-title",modelValue:t(s).title,"onUpdate:modelValue":e[0]||(e[0]=r=>t(s).title=r),placeholder:"e.g. Designing dependable SaaS architectures"},null,8,["modelValue"]),t(s).errors.title?(d(),i("p",Le,f(t(s).errors.title),1)):m("",!0)]),l("div",De,[o(t(v),{for:"post-summary"},{default:n(()=>[...e[20]||(e[20]=[u("Summary",-1)])]),_:1}),A(l("textarea",{id:"post-summary","onUpdate:modelValue":e[1]||(e[1]=r=>t(s).summary=r),placeholder:"Short excerpt displayed in listings",rows:"3",class:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},null,512),[[X,t(s).summary]]),t(s).errors.summary?(d(),i("p",Oe,f(t(s).errors.summary),1)):m("",!0)]),l("div",Ie,[o(t(v),{for:"post-date"},{default:n(()=>[...e[21]||(e[21]=[u("Publish date",-1)])]),_:1}),o(t(b),{id:"post-date",type:"date",modelValue:t(s).published_at,"onUpdate:modelValue":e[2]||(e[2]=r=>t(s).published_at=r)},null,8,["modelValue"]),t(s).errors.published_at?(d(),i("p",Fe,f(t(s).errors.published_at),1)):m("",!0)]),l("div",Me,[o(t(v),{for:"post-time"},{default:n(()=>[...e[22]||(e[22]=[u("Reading time",-1)])]),_:1}),o(t(b),{id:"post-time",modelValue:t(s).reading_time,"onUpdate:modelValue":e[3]||(e[3]=r=>t(s).reading_time=r),placeholder:"e.g. 7 min"},null,8,["modelValue"]),t(s).errors.reading_time?(d(),i("p",Ne,f(t(s).errors.reading_time),1)):m("",!0)]),l("div",Be,[o(t(v),{for:"post-cover"},{default:n(()=>[...e[23]||(e[23]=[u("Cover image",-1)])]),_:1}),o(t(b),{id:"post-cover",type:"file",accept:"image/*",onChange:z}),e[25]||(e[25]=l("p",{class:"text-xs text-muted-foreground"},"Upload up to 200 MB.",-1)),t(s).errors.cover_image?(d(),i("p",Ge,f(t(s).errors.cover_image),1)):m("",!0),p.value?.cover_image_url?(d(),i("div",Te,[e[24]||(e[24]=u(" Current cover: ",-1)),l("a",{href:p.value.cover_image_url,target:"_blank",rel:"noreferrer",class:"text-primary hover:underline"}," Preview ",8,qe)])):m("",!0)]),l("div",ze,[o(t(v),{for:"post-video"},{default:n(()=>[...e[26]||(e[26]=[u("Feature video",-1)])]),_:1}),o(t(b),{id:"post-video",type:"file",accept:"video/mp4,video/quicktime",onChange:H}),e[28]||(e[28]=l("p",{class:"text-xs text-muted-foreground"},"Upload mp4 or mov files up to 200 MB.",-1)),t(s).errors.feature_video?(d(),i("p",He,f(t(s).errors.feature_video),1)):m("",!0),p.value?.feature_video_url?(d(),i("div",Je,[e[27]||(e[27]=u(" Current video: ",-1)),l("a",{href:p.value.feature_video_url,target:"_blank",rel:"noreferrer",class:"text-primary hover:underline"}," Preview ",8,Ke)])):m("",!0)]),l("div",Qe,[o(t(v),{for:"post-gallery"},{default:n(()=>[...e[29]||(e[29]=[u("Gallery images",-1)])]),_:1}),o(t(b),{id:"post-gallery",type:"file",accept:"image/*",multiple:"",onChange:J}),e[33]||(e[33]=l("p",{class:"text-xs text-muted-foreground"},"Select up to 20 images. New uploads replace previous selection before saving.",-1)),t(s).errors.gallery?(d(),i("p",We,f(t(s).errors.gallery),1)):m("",!0),y.value.length?(d(),i("div",Xe,[e[31]||(e[31]=l("p",{class:"text-xs font-medium text-muted-foreground"},"Current gallery",-1)),l("div",Ye,[(d(!0),i(k,null,C(y.value,r=>(d(),i("div",{key:r.id,class:"group relative overflow-hidden rounded border"},[r.kind==="image"?(d(),i("img",{key:0,src:r.url,alt:r.id.toString(),class:"h-20 w-full object-cover"},null,8,Ze)):(d(),i("div",et,[o(c,{class:"mr-1 h-4 w-4"}),e[30]||(e[30]=u(" Video ",-1))])),l("button",{type:"button",class:"absolute right-1 top-1 rounded bg-background/80 px-1 text-[10px] font-medium text-destructive shadow",onClick:g=>K(r.id)}," Remove ",8,tt)]))),128))])])):m("",!0),_.value.length?(d(),i("div",st,[e[32]||(e[32]=l("p",{class:"text-xs font-medium text-muted-foreground"},"New uploads (pending save)",-1)),l("div",rt,[(d(!0),i(k,null,C(_.value,r=>(d(),i("div",{key:r.url,class:"overflow-hidden rounded border"},[l("img",{src:r.url,alt:r.name,class:"h-20 w-full object-cover"},null,8,lt)]))),128))])])):m("",!0)]),l("div",ot,[o(t(v),{for:"post-status"},{default:n(()=>[...e[34]||(e[34]=[u("Status",-1)])]),_:1}),A(l("select",{id:"post-status","onUpdate:modelValue":e[4]||(e[4]=r=>t(s).status=r),class:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},[(d(),i(k,null,C(N,r=>l("option",{key:r,value:r},f(r),9,at)),64))],512),[[Y,t(s).status]]),t(s).errors.status?(d(),i("p",it,f(t(s).errors.status),1)):m("",!0)])]),o(t(ae),{class:"mt-4 flex items-center justify-end gap-2"},{default:n(()=>[o(t(w),{variant:"ghost",onClick:$},{default:n(()=>[...e[35]||(e[35]=[u("Cancel",-1)])]),_:1}),o(t(w),{disabled:t(s).processing,onClick:T},{default:n(()=>[t(s).processing?(d(),i("span",dt,"Saving…")):(d(),i("span",nt,"Save"))]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])],64)}}});export{Mt as default};
