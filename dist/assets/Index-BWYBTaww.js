import{_ as Z}from"./AdminLayout.vue_vue_type_script_setup_true_lang-DSm9cKQI.js";
import{d as M,M as A,i as m,j as s,b as l,e as i,u as e,g as o,h as u,F as _,k as x,c as z,t as d,l as v,f as b,H as R,N as H,m as I,r as y,s as L}from"./app-BNk5Tten.js";import{_ as k}from"./Badge.vue_vue_type_script_setup_true_lang-Dc_7hQKm.js";import{_ as c}from"./Button.vue_vue_type_script_setup_true_lang-PhlT1jFQ.js";import{_ as C}from"./CardDescription.vue_vue_type_script_setup_true_lang-B2kVuMIi.js";
import{_ as $,a as h,b as S,c as w}from"./CardTitle.vue_vue_type_script_setup_true_lang-C5sOiAJg.js";import{P as O,a as W,T as q,_ as G,b as J,c as K,d as Q,e as X}from"./DialogTitle.vue_vue_type_script_setup_true_lang-Doa_Cajc.js";import{_ as Y}from"./Input.vue_vue_type_script_setup_true_lang-DnkyBbgT.js";import{_ as g}from"./Label.vue_vue_type_script_setup_true_lang-kFjkqwHs.js";import"./Primitive-CjWR7Ema.js";import"./button-B3GKAfbB.js";import"./badge-CYwMBmzJ.js";import"./index-sF3JAlrh.js";import"./useForwardPropsEmits-kFya-Fyw.js";import"./SheetContent.vue_vue_type_script_setup_true_lang-BMW_SBM-.js";import"./useForwardExpose-Bt4yM_YF.js";import"./Presence-CC9Lr9XA.js";import"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-B_UKhnTo.js";import"./input-1cBh28RH.js";import"./floating-ui.dom-XjuzL8W_.js";import"./VisuallyHidden-BhwQ6HL5.js";import"./useDirection-BfowJ6Bm.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./avatar-C-rXcHc7.js";import"./index-MR6zpLVp.js";import"./index-B3J4LzN3.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-v8Z3VU-x.js";import"./layers-CvXSMrWT.js";import"./phone-tNkuiWIL.js";const ee={class:"flex flex-col gap-6 p-6"},te={class:"flex flex-col gap-2"},se={class:"flex items-center justify-between"},ae={class:"grid gap-4 lg:grid-cols-2"},le={class:"flex items-start justify-between gap-4"},re={class:"flex items-center gap-2"},ie={class:"flex flex-col gap-4"},oe={class:"space-y-2"},ne={key:0,class:"text-sm text-destructive"},ue={class:"space-y-2"},de={key:0,class:"text-sm text-destructive"},me={class:"space-y-2"},fe=["value"],pe={key:0,class:"text-sm text-destructive"},ce={key:0},_e={key:1},We=M({__name:"Index",props:{services:{}},setup(V){const E=V,P=I(()=>[{title:"Admin",href:"/admin"},{title:"Services"}]),f=y(!1),p=y(null),a=A({title:"",summary:"",status:"Published"}),U=["Published","Draft"];function D(){p.value=null,a.reset(),a.clearErrors(),a.status="Published",f.value=!0}function j(n){p.value=n,a.reset(),a.clearErrors(),a.title=n.title,a.summary=n.summary??"",a.status=n.status,f.value=!0}function N(){const n={preserveScroll:!0,onSuccess:()=>{f.value=!1,a.reset(),a.clearErrors()}};p.value?a.put(`/admin/services/${p.value.id}`,n):a.post("/admin/services",n)}function T(n){confirm(`Remove “${n.title}”?`)&&L.delete(`/admin/services/${n.id}`,{preserveScroll:!0})}function B(){f.value=!1,a.reset(),a.clearErrors(),p.value=null}return(n,t)=>(u(),m(_,null,[s(Z,{breadcrumbs:P.value},{default:l(()=>[i("div",ee,[i("div",te,[i("div",se,[i("div",null,[s(e(k),{variant:"secondary",class:"w-fit mb-2"},{default:l(()=>[...t[4]||(t[4]=[o("Services",-1)])]),_:1}),t[5]||(t[5]=i("h1",{class:"text-3xl font-semibold tracking-tight"},"Manage service catalogue",-1)),t[6]||(t[6]=i("p",{class:"text-muted-foreground text-sm"}," Update the offerings that appear on the public services page. ",-1))]),s(e(c),{onClick:D},{default:l(()=>[s(e(O),{class:"h-4 w-4"}),t[7]||(t[7]=o(" Add service ",-1))]),_:1})])]),i("div",ae,[(u(!0),m(_,null,x(E.services,r=>(u(),z(e($),{key:r.id,class:"flex flex-col"},{default:l(()=>[s(e(h),null,{default:l(()=>[i("div",le,[i("div",null,[s(e(S),{class:"text-lg"},{default:l(()=>[o(d(r.title),1)]),_:2},1024),s(e(C),null,{default:l(()=>[o(d(r.summary),1)]),_:2},1024)]),s(e(k),{variant:r.status==="Published"?"default":"outline"},{default:l(()=>[o(d(r.status),1)]),_:2},1032,["variant"])])]),_:2},1024),s(e(w),{class:"mt-auto flex items-center justify-between text-sm text-muted-foreground"},{default:l(()=>[i("div",null,"Updated "+d(r.updated_at??"—"),1),i("div",re,[s(e(c),{variant:"ghost",size:"sm",onClick:F=>j(r)},{default:l(()=>[s(e(W),{class:"h-4 w-4"}),t[8]||(t[8]=o(" Edit ",-1))]),_:1},8,["onClick"]),s(e(c),{variant:"ghost",size:"sm",onClick:F=>T(r)},{default:l(()=>[s(e(q),{class:"h-4 w-4"}),t[9]||(t[9]=o(" Remove ",-1))]),_:1},8,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),s(e($),null,{default:l(()=>[s(e(h),null,{default:l(()=>[s(e(S),{class:"text-base"},{default:l(()=>[...t[10]||(t[10]=[o("Publishing guidance",-1)])]),_:1}),s(e(C),null,{default:l(()=>[...t[11]||(t[11]=[o(" Services appear on the public site in alphabetical order. Draft entries remain hidden until they are marked as published. ",-1)])]),_:1})]),_:1}),s(e(w),{class:"text-sm text-muted-foreground"},{default:l(()=>[...t[12]||(t[12]=[i("p",null," Use the editor to keep summaries concise and action oriented. Changes take effect immediately once saved. ",-1)])]),_:1})]),_:1})])]),_:1},8,["breadcrumbs"]),s(e(X),{open:f.value,"onUpdate:open":t[3]||(t[3]=r=>f.value=r)},{default:l(()=>[s(e(G),null,{default:l(()=>[s(e(J),null,{default:l(()=>[s(e(K),null,{default:l(()=>[o(d(p.value?"Edit service":"Add service"),1)]),_:1})]),_:1}),i("div",ie,[i("div",oe,[s(e(g),{for:"service-title"},{default:l(()=>[...t[13]||(t[13]=[o("Title",-1)])]),_:1}),s(e(Y),{id:"service-title",modelValue:e(a).title,"onUpdate:modelValue":t[0]||(t[0]=r=>e(a).title=r),placeholder:"e.g. Web applications"},null,8,["modelValue"]),e(a).errors.title?(u(),m("p",ne,d(e(a).errors.title),1)):v("",!0)]),i("div",ue,[s(e(g),{for:"service-summary"},{default:l(()=>[...t[14]||(t[14]=[o("Summary",-1)])]),_:1}),b(i("textarea",{id:"service-summary","onUpdate:modelValue":t[1]||(t[1]=r=>e(a).summary=r),placeholder:"Describe the service in one or two sentences",rows:"3",class:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},null,512),[[R,e(a).summary]]),e(a).errors.summary?(u(),m("p",de,d(e(a).errors.summary),1)):v("",!0)]),i("div",me,[s(e(g),{for:"service-status"},{default:l(()=>[...t[15]||(t[15]=[o("Status",-1)])]),_:1}),b(i("select",{id:"service-status","onUpdate:modelValue":t[2]||(t[2]=r=>e(a).status=r),class:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},[(u(),m(_,null,x(U,r=>i("option",{key:r,value:r},d(r),9,fe)),64))],512),[[H,e(a).status]]),e(a).errors.status?(u(),m("p",pe,d(e(a).errors.status),1)):v("",!0)]),s(e(Q),{class:"mt-4 flex items-center justify-end gap-2"},{default:l(()=>[s(e(c),{variant:"ghost",onClick:B},{default:l(()=>[...t[16]||(t[16]=[o("Cancel",-1)])]),_:1}),s(e(c),{disabled:e(a).processing,onClick:N},{default:l(()=>[e(a).processing?(u(),m("span",ce,"Saving…")):(u(),m("span",_e,"Save"))]),_:1},8,["disabled"])]),_:1})])]),_:1})]),_:1},8,["open"])],64))}});export{We as default};
