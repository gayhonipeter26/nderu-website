import{I as ae,_ as ie}from"./AdminLayout.vue_vue_type_script_setup_true_lang-DSm9cKQI.js";
import{d as K,M as J,i as d,j as o,b as i,e as l,u as t,g as u,h as n,l as m,F as x,k,t as f,f as $,H as Q,N as W,m as U,r as w,s as X}from"./app-BNk5Tten.js";import{_ as A}from"./Badge.vue_vue_type_script_setup_true_lang-Dc_7hQKm.js";import{_ as b}from"./Button.vue_vue_type_script_setup_true_lang-PhlT1jFQ.js";import{_ as j}from"./CardDescription.vue_vue_type_script_setup_true_lang-B2kVuMIi.js";
import{_ as S,a as L,b as P,c as R}from"./CardTitle.vue_vue_type_script_setup_true_lang-C5sOiAJg.js";import{P as Y,a as Z,T as ee,_ as te,b as se,c as re,d as le,e as oe}from"./DialogTitle.vue_vue_type_script_setup_true_lang-Doa_Cajc.js";import{_ as h}from"./Input.vue_vue_type_script_setup_true_lang-DnkyBbgT.js";import{_ as v}from"./Label.vue_vue_type_script_setup_true_lang-kFjkqwHs.js";import{V as E}from"./video-DTLl9e1c.js";import"./Primitive-CjWR7Ema.js";import"./button-B3GKAfbB.js";import"./badge-CYwMBmzJ.js";import"./index-sF3JAlrh.js";import"./useForwardPropsEmits-kFya-Fyw.js";import"./SheetContent.vue_vue_type_script_setup_true_lang-BMW_SBM-.js";import"./useForwardExpose-Bt4yM_YF.js";import"./Presence-CC9Lr9XA.js";import"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-B_UKhnTo.js";import"./input-1cBh28RH.js";import"./floating-ui.dom-XjuzL8W_.js";import"./VisuallyHidden-BhwQ6HL5.js";import"./useDirection-BfowJ6Bm.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./avatar-C-rXcHc7.js";import"./index-MR6zpLVp.js";import"./index-B3J4LzN3.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-v8Z3VU-x.js";import"./layers-CvXSMrWT.js";import"./phone-tNkuiWIL.js";const de={class:"flex flex-col gap-6 p-6"},ne={class:"flex flex-wrap items-center justify-between gap-4"},ue={class:"overflow-x-auto"},me={class:"w-full text-left text-sm"},pe={key:0},fe={class:"px-4 py-3"},ce={class:"font-medium text-foreground"},ge={key:0,class:"mt-1 text-xs text-muted-foreground"},ve={class:"px-4 py-3 text-muted-foreground"},_e={class:"px-4 py-3 text-muted-foreground"},he={class:"px-4 py-3 text-muted-foreground"},ye={class:"px-4 py-3"},xe={class:"flex flex-col gap-1 text-xs"},be=["href"],ke=["href"],we={key:2,class:"text-muted-foreground"},Ce={class:"px-4 py-3"},Ve={class:"flex items-center gap-2 text-xs text-muted-foreground"},$e={key:0,class:"flex items-center gap-1"},Ue={key:1,class:"flex items-center gap-1"},Ae={key:2},Se={class:"px-4 py-3"},Le={class:"px-4 py-3"},Pe={class:"flex justify-end gap-2"},Re={class:"flex flex-col gap-4"},je={class:"space-y-2"},Ee={key:0,class:"text-sm text-destructive"},Ne={class:"space-y-2"},Oe={key:0,class:"text-sm text-destructive"},De={class:"space-y-2"},Te={key:0,class:"text-sm text-destructive"},Ge={key:1,class:"text-xs text-muted-foreground"},Me=["href"],Be={class:"space-y-2"},Fe={key:0,class:"text-sm text-destructive"},He={key:1,class:"text-xs text-muted-foreground"},Ie=["href"],qe={class:"space-y-2"},ze={key:0,class:"text-sm text-destructive"},Ke={key:1,class:"space-y-2 rounded-md border p-3"},Je={class:"grid grid-cols-3 gap-2"},Qe=["src","alt"],We={key:1,class:"flex h-20 w-full items-center justify-center bg-muted text-xs text-muted-foreground"},Xe=["onClick"],Ye={key:2,class:"space-y-2 rounded-md border border-dashed p-3"},Ze={class:"grid grid-cols-3 gap-2"},et=["src","alt"],tt={class:"space-y-2"},st={key:0,class:"text-sm text-destructive"},rt={class:"space-y-2"},lt={key:0,class:"text-sm text-destructive"},ot={class:"space-y-2"},at={key:0,class:"text-sm text-destructive"},it={class:"space-y-2"},dt=["value"],nt={key:0,class:"text-sm text-destructive"},Mt=K({__name:"Index",props:{sessions:{}},setup(N){const O=N,C=U(()=>{const a=O.sessions;return Array.isArray(a)?a:a&&Array.isArray(a.data)?a.data:[]}),D=U(()=>[{title:"Admin",href:"/admin"},{title:"Photography"}]),y=w(!1),c=w(null),s=J({title:"",location:"",summary:"",hero_image:null,highlight_video:null,status:"Published",deliverables:"3",scheduled_at:"",gallery:[],gallery_remove:[]}),T=["Published","Draft"],_=w([]),g=w([]);function G(){c.value=null,s.reset(),s.clearErrors(),s.status="Published",s.deliverables="3",s.gallery=[],s.gallery_remove=[],_.value=[],g.value.forEach(a=>URL.revokeObjectURL(a.url)),g.value=[],y.value=!0}function M(a){c.value=a,s.reset(),s.clearErrors(),s.title=a.title,s.location=a.location??"",s.summary=a.summary??"",s.status=a.status,s.deliverables=String(a.deliverables??0),s.scheduled_at=a.scheduled_at??"",s.hero_image=null,s.highlight_video=null,s.gallery=[],s.gallery_remove=[],_.value=Array.isArray(a.gallery)?[...a.gallery]:[],g.value.forEach(e=>URL.revokeObjectURL(e.url)),g.value=[],y.value=!0}function B(){const a={...s.data(),deliverables:s.deliverables?Number(s.deliverables):0},e={preserveScroll:!0,onSuccess:()=>V(),forceFormData:!0},r=()=>{const p={...a};return s.hero_image||delete p.hero_image,s.highlight_video||delete p.highlight_video,s.gallery.length||delete p.gallery,s.gallery_remove.length||delete p.gallery_remove,p};c.value?s.transform(r).put(`/admin/photography/${c.value.id}`,e):s.transform(r).post("/admin/photography",e)}function F(a){confirm(`Remove “${a.title}”?`)&&X.delete(`/admin/photography/${a.id}`,{preserveScroll:!0})}function V(){y.value=!1,s.reset(),s.clearErrors(),c.value=null,_.value=[],g.value.forEach(a=>URL.revokeObjectURL(a.url)),g.value=[]}function H(a){const e=a.target;s.hero_image=e.files?.[0]??null}function I(a){const e=a.target;s.highlight_video=e.files?.[0]??null}function q(a){const e=a.target,r=Array.from(e.files??[]);s.gallery=r,g.value.forEach(p=>URL.revokeObjectURL(p.url)),g.value=r.map(p=>({name:p.name,url:URL.createObjectURL(p)}))}function z(a){s.gallery_remove.includes(a)||(s.gallery_remove.push(a),_.value=_.value.filter(e=>e.id!==a))}return(a,e)=>(n(),d(x,null,[o(ie,{breadcrumbs:D.value},{default:i(()=>[l("div",de,[l("div",ne,[l("div",null,[o(t(A),{variant:"secondary",class:"mb-2 w-fit"},{default:i(()=>[...e[7]||(e[7]=[u("Photography",-1)])]),_:1}),e[8]||(e[8]=l("h1",{class:"text-3xl font-semibold tracking-tight"},"Session catalogue",-1)),e[9]||(e[9]=l("p",{class:"text-sm text-muted-foreground"}," Keep photography engagements up to date, including location notes and deliverables. ",-1))]),o(t(b),{onClick:G},{default:i(()=>[o(t(Y),{class:"h-4 w-4"}),e[10]||(e[10]=u(" Add session ",-1))]),_:1})]),o(t(S),null,{default:i(()=>[o(t(L),{class:"pb-4"},{default:i(()=>[o(t(P),{class:"text-base"},{default:i(()=>[...e[11]||(e[11]=[u("Session catalogue",-1)])]),_:1}),o(t(j),null,{default:i(()=>[...e[12]||(e[12]=[u("Published sessions appear on the public photography page in chronological order. ",-1)])]),_:1})]),_:1}),o(t(R),{class:"p-0"},{default:i(()=>[l("div",ue,[l("table",me,[e[16]||(e[16]=l("thead",{class:"border-b bg-muted/50 text-xs uppercase text-muted-foreground"},[l("tr",null,[l("th",{class:"px-4 py-3 font-medium"},"Title"),l("th",{class:"px-4 py-3 font-medium"},"Location"),l("th",{class:"px-4 py-3 font-medium"},"Scheduled"),l("th",{class:"px-4 py-3 font-medium"},"Deliverables"),l("th",{class:"px-4 py-3 font-medium"},"Media"),l("th",{class:"px-4 py-3 font-medium"},"Gallery"),l("th",{class:"px-4 py-3 font-medium"},"Status"),l("th",{class:"px-4 py-3 font-medium text-right"},"Actions")])],-1)),l("tbody",null,[C.value.length===0?(n(),d("tr",pe,[...e[13]||(e[13]=[l("td",{colspan:"8",class:"px-4 py-6 text-center text-sm text-muted-foreground"}," No photography sessions yet. Add your first session to populate the public page. ",-1)])])):m("",!0),(n(!0),d(x,null,k(C.value,r=>(n(),d("tr",{key:r.id,class:"border-b last:border-0"},[l("td",fe,[l("div",ce,f(r.title),1),r.summary?(n(),d("p",ge,f(r.summary),1)):m("",!0)]),l("td",ve,f(r.location??"—"),1),l("td",_e,f(r.scheduled_at??"Unscheduled"),1),l("td",he,f(r.deliverables??0),1),l("td",ye,[l("div",xe,[r.hero_image_url?(n(),d("a",{key:0,href:r.hero_image_url,target:"_blank",rel:"noreferrer",class:"text-primary hover:underline"}," View photo ",8,be)):m("",!0),r.highlight_video_url?(n(),d("a",{key:1,href:r.highlight_video_url,target:"_blank",rel:"noreferrer",class:"text-primary hover:underline"}," View video ",8,ke)):m("",!0),!r.hero_image_url&&!r.highlight_video_url?(n(),d("span",we,"—")):m("",!0)])]),l("td",Ce,[l("div",Ve,[Array.isArray(r.gallery)&&r.gallery.length?(n(),d("div",$e,[o(t(ae),{class:"h-3.5 w-3.5"}),u(" "+f(r.gallery.filter(p=>p.kind==="image").length),1)])):m("",!0),Array.isArray(r.gallery)&&r.gallery.some(p=>p.kind==="video")?(n(),d("div",Ue,[o(t(E),{class:"h-3.5 w-3.5"}),u(" "+f(r.gallery.filter(p=>p.kind==="video").length),1)])):m("",!0),!Array.isArray(r.gallery)||!r.gallery.length?(n(),d("span",Ae,"—")):m("",!0)])]),l("td",Se,[o(t(A),{variant:r.status==="Published"?"default":"outline"},{default:i(()=>[u(f(r.status),1)]),_:2},1032,["variant"])]),l("td",Le,[l("div",Pe,[o(t(b),{variant:"ghost",size:"sm",onClick:p=>M(r)},{default:i(()=>[o(t(Z),{class:"h-4 w-4"}),e[14]||(e[14]=u(" Edit ",-1))]),_:1},8,["onClick"]),o(t(b),{variant:"ghost",size:"sm",onClick:p=>F(r)},{default:i(()=>[o(t(ee),{class:"h-4 w-4"}),e[15]||(e[15]=u(" Remove ",-1))]),_:1},8,["onClick"])])])]))),128))])])])]),_:1})]),_:1}),o(t(S),null,{default:i(()=>[o(t(L),null,{default:i(()=>[o(t(P),{class:"text-base"},{default:i(()=>[...e[17]||(e[17]=[u("Production notes",-1)])]),_:1}),o(t(j),null,{default:i(()=>[...e[18]||(e[18]=[u(" Capture briefing details per session, then publish once client approvals are in place. ",-1)])]),_:1})]),_:1}),o(t(R),{class:"text-sm text-muted-foreground"},{default:i(()=>[...e[19]||(e[19]=[l("p",null," These controls update local state only. Connect to your Laravel models to persist session changes and assets. ",-1)])]),_:1})]),_:1})])]),_:1},8,["breadcrumbs"]),o(t(oe),{open:y.value,"onUpdate:open":e[6]||(e[6]=r=>y.value=r)},{default:i(()=>[o(t(te),null,{default:i(()=>[o(t(se),null,{default:i(()=>[o(t(re),null,{default:i(()=>[u(f(c.value?"Edit session":"Add session"),1)]),_:1})]),_:1}),l("div",Re,[l("div",je,[o(t(v),{for:"session-title"},{default:i(()=>[...e[20]||(e[20]=[u("Title",-1)])]),_:1}),o(t(h),{id:"session-title",modelValue:t(s).title,"onUpdate:modelValue":e[0]||(e[0]=r=>t(s).title=r),placeholder:"e.g. Corporate conference 2024"},null,8,["modelValue"]),t(s).errors.title?(n(),d("p",Ee,f(t(s).errors.title),1)):m("",!0)]),l("div",Ne,[o(t(v),{for:"session-location"},{default:i(()=>[...e[21]||(e[21]=[u("Location",-1)])]),_:1}),o(t(h),{id:"session-location",modelValue:t(s).location,"onUpdate:modelValue":e[1]||(e[1]=r=>t(s).location=r),placeholder:"e.g. Nairobi, Kenya"},null,8,["modelValue"]),t(s).errors.location?(n(),d("p",Oe,f(t(s).errors.location),1)):m("",!0)]),l("div",De,[o(t(v),{for:"session-hero-image"},{default:i(()=>[...e[22]||(e[22]=[u("Hero image",-1)])]),_:1}),o(t(h),{id:"session-hero-image",type:"file",accept:"image/*",onChange:H}),e[24]||(e[24]=l("p",{class:"text-xs text-muted-foreground"},"Upload up to 200 MB.",-1)),t(s).errors.hero_image?(n(),d("p",Te,f(t(s).errors.hero_image),1)):m("",!0),c.value?.hero_image_url?(n(),d("div",Ge,[e[23]||(e[23]=u(" Current image: ",-1)),l("a",{href:c.value.hero_image_url,target:"_blank",rel:"noreferrer",class:"text-primary hover:underline"}," Preview ",8,Me)])):m("",!0)]),l("div",Be,[o(t(v),{for:"session-video"},{default:i(()=>[...e[25]||(e[25]=[u("Highlight video",-1)])]),_:1}),o(t(h),{id:"session-video",type:"file",accept:"video/mp4,video/quicktime",onChange:I}),e[27]||(e[27]=l("p",{class:"text-xs text-muted-foreground"},"Upload mp4 or mov files up to 200 MB.",-1)),t(s).errors.highlight_video?(n(),d("p",Fe,f(t(s).errors.highlight_video),1)):m("",!0),c.value?.highlight_video_url?(n(),d("div",He,[e[26]||(e[26]=u(" Current video: ",-1)),l("a",{href:c.value.highlight_video_url,target:"_blank",rel:"noreferrer",class:"text-primary hover:underline"}," Preview ",8,Ie)])):m("",!0)]),l("div",qe,[o(t(v),{for:"session-gallery"},{default:i(()=>[...e[28]||(e[28]=[u("Gallery images",-1)])]),_:1}),o(t(h),{id:"session-gallery",type:"file",accept:"image/*",multiple:"",onChange:q}),e[32]||(e[32]=l("p",{class:"text-xs text-muted-foreground"},"Select up to 20 images. New uploads replace previous selection before saving.",-1)),t(s).errors.gallery?(n(),d("p",ze,f(t(s).errors.gallery),1)):m("",!0),_.value.length?(n(),d("div",Ke,[e[30]||(e[30]=l("p",{class:"text-xs font-medium text-muted-foreground"},"Current gallery",-1)),l("div",Je,[(n(!0),d(x,null,k(_.value,r=>(n(),d("div",{key:r.id,class:"group relative overflow-hidden rounded border"},[r.kind==="image"?(n(),d("img",{key:0,src:r.url,alt:r.id.toString(),class:"h-20 w-full object-cover"},null,8,Qe)):(n(),d("div",We,[o(t(E),{class:"mr-1 h-4 w-4"}),e[29]||(e[29]=u(" Video ",-1))])),l("button",{type:"button",class:"absolute right-1 top-1 rounded bg-background/80 px-1 text-[10px] font-medium text-destructive shadow",onClick:p=>z(r.id)}," Remove ",8,Xe)]))),128))])])):m("",!0),g.value.length?(n(),d("div",Ye,[e[31]||(e[31]=l("p",{class:"text-xs font-medium text-muted-foreground"},"New uploads (pending save)",-1)),l("div",Ze,[(n(!0),d(x,null,k(g.value,r=>(n(),d("div",{key:r.url,class:"overflow-hidden rounded border"},[l("img",{src:r.url,alt:r.name,class:"h-20 w-full object-cover"},null,8,et)]))),128))])])):m("",!0)]),l("div",tt,[o(t(v),{for:"session-summary"},{default:i(()=>[...e[33]||(e[33]=[u("Summary",-1)])]),_:1}),$(l("textarea",{id:"session-summary","onUpdate:modelValue":e[2]||(e[2]=r=>t(s).summary=r),rows:"3",placeholder:"Overview of the session for internal reference",class:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},null,512),[[Q,t(s).summary]]),t(s).errors.summary?(n(),d("p",st,f(t(s).errors.summary),1)):m("",!0)]),l("div",rt,[o(t(v),{for:"session-deliverables"},{default:i(()=>[...e[34]||(e[34]=[u("Deliverables",-1)])]),_:1}),o(t(h),{id:"session-deliverables",type:"number",min:"0",modelValue:t(s).deliverables,"onUpdate:modelValue":e[3]||(e[3]=r=>t(s).deliverables=r)},null,8,["modelValue"]),t(s).errors.deliverables?(n(),d("p",lt,f(t(s).errors.deliverables),1)):m("",!0)]),l("div",ot,[o(t(v),{for:"session-scheduled"},{default:i(()=>[...e[35]||(e[35]=[u("Scheduled date",-1)])]),_:1}),o(t(h),{id:"session-scheduled",type:"date",modelValue:t(s).scheduled_at,"onUpdate:modelValue":e[4]||(e[4]=r=>t(s).scheduled_at=r)},null,8,["modelValue"]),t(s).errors.scheduled_at?(n(),d("p",at,f(t(s).errors.scheduled_at),1)):m("",!0)]),l("div",it,[o(t(v),{for:"session-status"},{default:i(()=>[...e[36]||(e[36]=[u("Status",-1)])]),_:1}),$(l("select",{id:"session-status","onUpdate:modelValue":e[5]||(e[5]=r=>t(s).status=r),class:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},[(n(),d(x,null,k(T,r=>l("option",{key:r,value:r},f(r),9,dt)),64))],512),[[W,t(s).status]]),t(s).errors.status?(n(),d("p",nt,f(t(s).errors.status),1)):m("",!0)])]),o(t(le),{class:"mt-4 flex items-center justify-end gap-2"},{default:i(()=>[o(t(b),{variant:"ghost",onClick:V},{default:i(()=>[...e[37]||(e[37]=[u("Cancel",-1)])]),_:1}),o(t(b),{disabled:t(s).processing,onClick:B},{default:i(()=>[...e[38]||(e[38]=[u("Save",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])],64))}});export{Mt as default};
