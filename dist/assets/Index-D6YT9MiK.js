import{I as de,_ as ie}from"./AdminLayout.vue_vue_type_script_setup_true_lang-DSm9cKQI.js";
import{d as W,M as J,i,j as l,b as u,e as o,u as t,g as n,h as d,l as f,F as v,k as b,t as p,c as K,f as C,N as Q,H as S,m as A,r as w,s as X}from"./app-BNk5Tten.js";import{_ as V}from"./Badge.vue_vue_type_script_setup_true_lang-Dc_7hQKm.js";import{_ as k}from"./Button.vue_vue_type_script_setup_true_lang-PhlT1jFQ.js";import{_ as F}from"./CardDescription.vue_vue_type_script_setup_true_lang-B2kVuMIi.js";
import{_ as j,a as P,b as R,c as E}from"./CardTitle.vue_vue_type_script_setup_true_lang-C5sOiAJg.js";import{P as Z,a as ee,T as te,_ as se,b as re,c as oe,d as le,e as ae}from"./DialogTitle.vue_vue_type_script_setup_true_lang-Doa_Cajc.js";import{_ as x}from"./Input.vue_vue_type_script_setup_true_lang-DnkyBbgT.js";import{_ as g}from"./Label.vue_vue_type_script_setup_true_lang-kFjkqwHs.js";import{V as L}from"./video-DTLl9e1c.js";import"./Primitive-CjWR7Ema.js";import"./button-B3GKAfbB.js";import"./badge-CYwMBmzJ.js";import"./index-sF3JAlrh.js";import"./useForwardPropsEmits-kFya-Fyw.js";import"./SheetContent.vue_vue_type_script_setup_true_lang-BMW_SBM-.js";import"./useForwardExpose-Bt4yM_YF.js";import"./Presence-CC9Lr9XA.js";import"./AppSidebarLayout.vue_vue_type_script_setup_true_lang-B_UKhnTo.js";import"./input-1cBh28RH.js";import"./floating-ui.dom-XjuzL8W_.js";import"./VisuallyHidden-BhwQ6HL5.js";import"./useDirection-BfowJ6Bm.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./avatar-C-rXcHc7.js";import"./index-MR6zpLVp.js";import"./index-B3J4LzN3.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-v8Z3VU-x.js";import"./layers-CvXSMrWT.js";import"./phone-tNkuiWIL.js";const ue={class:"flex flex-col gap-6 p-6"},ne={class:"flex flex-wrap items-center justify-between gap-4"},me={class:"overflow-x-auto"},fe={class:"w-full text-left text-sm"},pe={key:0},ce={class:"px-4 py-3"},ye={class:"font-medium text-foreground"},ge={key:0,class:"mt-1 text-xs text-muted-foreground"},_e={class:"px-4 py-3 text-muted-foreground"},ve={class:"px-4 py-3 text-muted-foreground"},xe={class:"px-4 py-3"},he={class:"px-4 py-3"},be={key:1,class:"text-muted-foreground"},ke={class:"px-4 py-3"},we={class:"flex flex-col gap-1 text-xs"},Ce=["href"],Ve=["href"],$e={key:2,class:"text-muted-foreground"},Ue={class:"px-4 py-3 text-muted-foreground"},Se={class:"px-4 py-3"},Ae={class:"flex items-center gap-2 text-xs text-muted-foreground"},je={key:0,class:"flex items-center gap-1"},Pe={key:1,class:"flex items-center gap-1"},Re={key:2},Ee={class:"px-4 py-3"},Fe={class:"flex justify-end gap-2"},Le={class:"flex flex-col gap-4"},Ne={class:"space-y-2"},De={class:"space-y-2"},Ge={class:"space-y-2"},Me={key:0,class:"text-sm text-destructive"},Oe={class:"space-y-2"},Be=["value"],Te={key:0,class:"text-sm text-destructive"},Ye={class:"space-y-2"},Ie={key:0,class:"text-sm text-destructive"},He={class:"space-y-2"},qe={key:0,class:"text-sm text-destructive"},ze={key:1,class:"text-xs text-muted-foreground"},We=["href"],Je={class:"space-y-2"},Ke={key:0,class:"text-sm text-destructive"},Qe={key:1,class:"text-xs text-muted-foreground"},Xe=["href"],Ze={class:"space-y-2"},et={key:0,class:"text-sm text-destructive"},tt={key:1,class:"space-y-2 rounded-md border p-3"},st={class:"grid grid-cols-3 gap-2"},rt=["src","alt"],ot={key:1,class:"flex h-20 w-full items-center justify-center bg-muted text-xs text-muted-foreground"},lt=["onClick"],at={key:2,class:"space-y-2 rounded-md border border-dashed p-3"},dt={class:"grid grid-cols-3 gap-2"},it=["src","alt"],ut={class:"space-y-2"},nt={key:0,class:"text-sm text-destructive"},mt={class:"flex items-center justify-between"},ft={class:"space-y-1"},pt=["checked"],ct={key:0,class:"space-y-1 text-sm text-destructive"},yt={key:0},gt={key:1},zt=W({__name:"Index",props:{projects:{}},setup(N){const D=N,$=A(()=>{const a=D.projects;return Array.isArray(a)?a:a&&Array.isArray(a.data)?a.data:[]}),G=A(()=>[{title:"Admin",href:"/admin"},{title:"Projects"}]),h=w(!1),c=w(null),s=J({title:"",category:"",summary:"",status:"Published",year:String(new Date().getFullYear()),featured:!1,hero_image:null,case_study_video:null,gallery:[],gallery_remove:[]}),M=["Published","Draft"],_=w([]),y=w([]);function O(){c.value=null,s.reset(),s.clearErrors(),s.status="Published",s.year=String(new Date().getFullYear()),s.featured=!1,s.hero_image=null,s.case_study_video=null,s.gallery=[],s.gallery_remove=[],_.value=[],y.value.forEach(a=>URL.revokeObjectURL(a.url)),y.value=[],h.value=!0}function B(a){c.value=a,s.reset(),s.clearErrors(),s.title=a.title,s.category=a.category??"",s.summary=a.summary??"",s.status=a.status,s.year=a.year?String(a.year):String(new Date().getFullYear()),s.featured=a.featured,s.hero_image=null,s.case_study_video=null,s.gallery=[],s.gallery_remove=[],_.value=Array.isArray(a.gallery)?[...a.gallery]:[],y.value.forEach(e=>URL.revokeObjectURL(e.url)),y.value=[],h.value=!0}function T(){const a={preserveScroll:!0,onSuccess:()=>U(),forceFormData:!0},e=s.year?Number(s.year):null,r=()=>{const m={...s.data(),year:e,featured:s.featured};return s.hero_image||delete m.hero_image,s.case_study_video||delete m.case_study_video,s.gallery.length||delete m.gallery,s.gallery_remove.length||delete m.gallery_remove,m};c.value?s.transform(r).put(`/admin/projects/${c.value.id}`,a):s.transform(r).post("/admin/projects",a)}function Y(a){confirm(`Remove “${a.title}”?`)&&X.delete(`/admin/projects/${a.id}`,{preserveScroll:!0})}function U(){h.value=!1,s.reset(),s.clearErrors(),c.value=null,_.value=[],y.value.forEach(a=>URL.revokeObjectURL(a.url)),y.value=[]}function I(a){const e=a.target;s.hero_image=e.files?.[0]??null}function H(a){const e=a.target;s.case_study_video=e.files?.[0]??null}function q(a){const e=a.target,r=Array.from(e.files??[]);s.gallery=r,y.value.forEach(m=>URL.revokeObjectURL(m.url)),y.value=r.map(m=>({name:m.name,url:URL.createObjectURL(m)}))}function z(a){s.gallery_remove.includes(a)||(s.gallery_remove.push(a),_.value=_.value.filter(e=>e.id!==a))}return(a,e)=>(d(),i(v,null,[l(ie,{breadcrumbs:G.value},{default:u(()=>[o("div",ue,[o("div",ne,[o("div",null,[l(t(V),{variant:"secondary",class:"mb-2 w-fit"},{default:u(()=>[...e[8]||(e[8]=[n("Projects",-1)])]),_:1}),e[9]||(e[9]=o("h1",{class:"text-3xl font-semibold tracking-tight"},"Portfolio overview",-1)),e[10]||(e[10]=o("p",{class:"text-sm text-muted-foreground"}," Curate the case studies that highlight expertise on the public site. ",-1))]),l(t(k),{onClick:O},{default:u(()=>[l(t(Z),{class:"h-4 w-4"}),e[11]||(e[11]=n(" Add project ",-1))]),_:1})]),l(t(j),null,{default:u(()=>[l(t(P),{class:"pb-4"},{default:u(()=>[l(t(R),{class:"text-base"},{default:u(()=>[...e[12]||(e[12]=[n("Project catalogue",-1)])]),_:1}),l(t(F),null,{default:u(()=>[...e[13]||(e[13]=[n("Featured and published projects appear on the public portfolio immediately.",-1)])]),_:1})]),_:1}),l(t(E),{class:"p-0"},{default:u(()=>[o("div",me,[o("table",fe,[e[18]||(e[18]=o("thead",{class:"border-b bg-muted/50 text-xs uppercase text-muted-foreground"},[o("tr",null,[o("th",{class:"px-4 py-3 font-medium"},"Title"),o("th",{class:"px-4 py-3 font-medium"},"Category"),o("th",{class:"px-4 py-3 font-medium"},"Year"),o("th",{class:"px-4 py-3 font-medium"},"Status"),o("th",{class:"px-4 py-3 font-medium"},"Featured"),o("th",{class:"px-4 py-3 font-medium"},"Media"),o("th",{class:"px-4 py-3 font-medium"},"Gallery"),o("th",{class:"px-4 py-3 font-medium"},"Updated"),o("th",{class:"px-4 py-3 font-medium text-right"},"Actions")])],-1)),o("tbody",null,[$.value.length===0?(d(),i("tr",pe,[...e[14]||(e[14]=[o("td",{colspan:"8",class:"px-4 py-6 text-center text-sm text-muted-foreground"}," No projects yet. Add your first project to populate the public portfolio. ",-1)])])):f("",!0),(d(!0),i(v,null,b($.value,r=>(d(),i("tr",{key:r.id,class:"border-b last:border-0"},[o("td",ce,[o("div",ye,p(r.title),1),r.summary?(d(),i("p",ge,p(r.summary),1)):f("",!0)]),o("td",_e,p(r.category??"—"),1),o("td",ve,p(r.year??"—"),1),o("td",xe,[l(t(V),{variant:r.status==="Published"?"default":"outline"},{default:u(()=>[n(p(r.status),1)]),_:2},1032,["variant"])]),o("td",he,[r.featured?(d(),K(t(V),{key:0,variant:"secondary"},{default:u(()=>[...e[15]||(e[15]=[n("Yes",-1)])]),_:1})):(d(),i("span",be,"No"))]),o("td",ke,[o("div",we,[r.hero_image_url?(d(),i("a",{key:0,href:r.hero_image_url,target:"_blank",rel:"noreferrer",class:"text-primary hover:underline"}," View image ",8,Ce)):f("",!0),r.case_study_video_url?(d(),i("a",{key:1,href:r.case_study_video_url,target:"_blank",rel:"noreferrer",class:"text-primary hover:underline"}," View video ",8,Ve)):f("",!0),!r.hero_image_url&&!r.case_study_video_url?(d(),i("span",$e,"—")):f("",!0)])]),o("td",Ue,p(r.updated_at??"—"),1),o("td",Se,[o("div",Ae,[Array.isArray(r.gallery)&&r.gallery.length?(d(),i("div",je,[l(t(de),{class:"h-3.5 w-3.5"}),n(" "+p(r.gallery.filter(m=>m.kind==="image").length),1)])):f("",!0),Array.isArray(r.gallery)&&r.gallery.some(m=>m.kind==="video")?(d(),i("div",Pe,[l(t(L),{class:"h-3.5 w-3.5"}),n(" "+p(r.gallery.filter(m=>m.kind==="video").length),1)])):f("",!0),!Array.isArray(r.gallery)||!r.gallery.length?(d(),i("span",Re,"—")):f("",!0)])]),o("td",Ee,[o("div",Fe,[l(t(k),{variant:"ghost",size:"sm",onClick:m=>B(r)},{default:u(()=>[l(t(ee),{class:"h-4 w-4"}),e[16]||(e[16]=n(" Edit ",-1))]),_:1},8,["onClick"]),l(t(k),{variant:"ghost",size:"sm",onClick:m=>Y(r)},{default:u(()=>[l(t(te),{class:"h-4 w-4"}),e[17]||(e[17]=n(" Remove ",-1))]),_:1},8,["onClick"])])])]))),128))])])])]),_:1})]),_:1}),l(t(j),null,{default:u(()=>[l(t(P),null,{default:u(()=>[l(t(R),{class:"text-base"},{default:u(()=>[...e[19]||(e[19]=[n("Guidance",-1)])]),_:1}),l(t(F),null,{default:u(()=>[...e[20]||(e[20]=[n(" Align the selection of projects with current priorities and offerings. Draft entries stay hidden until published. ",-1)])]),_:1})]),_:1}),l(t(E),{class:"text-sm text-muted-foreground"},{default:u(()=>[...e[21]||(e[21]=[o("p",null," Use the featured flag to spotlight priority work on the public site. Consider adding tags when the catalogue grows. ",-1)])]),_:1})]),_:1})])]),_:1},8,["breadcrumbs"]),l(t(ae),{open:h.value,"onUpdate:open":e[7]||(e[7]=r=>h.value=r)},{default:u(()=>[l(t(se),null,{default:u(()=>[l(t(re),null,{default:u(()=>[l(t(oe),null,{default:u(()=>[n(p(c.value?"Edit project":"Add project"),1)]),_:1})]),_:1}),o("div",Le,[o("div",Ne,[l(t(g),{for:"project-title"},{default:u(()=>[...e[22]||(e[22]=[n("Title",-1)])]),_:1}),l(t(x),{id:"project-title",modelValue:t(s).title,"onUpdate:modelValue":e[0]||(e[0]=r=>t(s).title=r),placeholder:"e.g. E-commerce platform rollout"},null,8,["modelValue"])]),o("div",De,[l(t(g),{for:"project-category"},{default:u(()=>[...e[23]||(e[23]=[n("Category",-1)])]),_:1}),l(t(x),{id:"project-category",modelValue:t(s).category,"onUpdate:modelValue":e[1]||(e[1]=r=>t(s).category=r),placeholder:"e.g. Web applications"},null,8,["modelValue"])]),o("div",Ge,[l(t(g),{for:"project-year"},{default:u(()=>[...e[24]||(e[24]=[n("Year",-1)])]),_:1}),l(t(x),{id:"project-year",type:"number",min:"2000",max:"2100",modelValue:t(s).year,"onUpdate:modelValue":e[2]||(e[2]=r=>t(s).year=r)},null,8,["modelValue"]),t(s).errors.year?(d(),i("p",Me,p(t(s).errors.year),1)):f("",!0)]),o("div",Oe,[l(t(g),{for:"project-status"},{default:u(()=>[...e[25]||(e[25]=[n("Status",-1)])]),_:1}),C(o("select",{id:"project-status","onUpdate:modelValue":e[3]||(e[3]=r=>t(s).status=r),class:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},[(d(),i(v,null,b(M,r=>o("option",{key:r,value:r},p(r),9,Be)),64))],512),[[Q,t(s).status]]),t(s).errors.status?(d(),i("p",Te,p(t(s).errors.status),1)):f("",!0)]),o("div",Ye,[l(t(g),{for:"project-summary"},{default:u(()=>[...e[26]||(e[26]=[n("Summary (optional)",-1)])]),_:1}),C(o("textarea",{id:"project-summary","onUpdate:modelValue":e[4]||(e[4]=r=>t(s).summary=r),placeholder:"Short description for internal reference",rows:"3",class:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},null,512),[[S,t(s).summary]]),t(s).errors.summary?(d(),i("p",Ie,p(t(s).errors.summary),1)):f("",!0)]),o("div",He,[l(t(g),{for:"project-hero-image"},{default:u(()=>[...e[27]||(e[27]=[n("Hero image",-1)])]),_:1}),l(t(x),{id:"project-hero-image",type:"file",accept:"image/*",onChange:I}),e[29]||(e[29]=o("p",{class:"text-xs text-muted-foreground"},"Upload up to 200 MB.",-1)),t(s).errors.hero_image?(d(),i("p",qe,p(t(s).errors.hero_image),1)):f("",!0),c.value?.hero_image_url?(d(),i("div",ze,[e[28]||(e[28]=n(" Current image: ",-1)),o("a",{href:c.value.hero_image_url,target:"_blank",rel:"noreferrer",class:"text-primary hover:underline"}," Preview ",8,We)])):f("",!0)]),o("div",Je,[l(t(g),{for:"project-case-study-video"},{default:u(()=>[...e[30]||(e[30]=[n("Case study video",-1)])]),_:1}),l(t(x),{id:"project-case-study-video",type:"file",accept:"video/mp4,video/quicktime",onChange:H}),e[32]||(e[32]=o("p",{class:"text-xs text-muted-foreground"},"Upload mp4 or mov files up to 200 MB.",-1)),t(s).errors.case_study_video?(d(),i("p",Ke,p(t(s).errors.case_study_video),1)):f("",!0),c.value?.case_study_video_url?(d(),i("div",Qe,[e[31]||(e[31]=n(" Current video: ",-1)),o("a",{href:c.value.case_study_video_url,target:"_blank",rel:"noreferrer",class:"text-primary hover:underline"}," Preview ",8,Xe)])):f("",!0)]),o("div",Ze,[l(t(g),{for:"project-gallery"},{default:u(()=>[...e[33]||(e[33]=[n("Gallery images",-1)])]),_:1}),l(t(x),{id:"project-gallery",type:"file",accept:"image/*",multiple:"",onChange:q}),e[37]||(e[37]=o("p",{class:"text-xs text-muted-foreground"},"Select up to 20 images. New uploads replace previous selection before saving.",-1)),t(s).errors.gallery?(d(),i("p",et,p(t(s).errors.gallery),1)):f("",!0),_.value.length?(d(),i("div",tt,[e[35]||(e[35]=o("p",{class:"text-xs font-medium text-muted-foreground"},"Current gallery",-1)),o("div",st,[(d(!0),i(v,null,b(_.value,r=>(d(),i("div",{key:r.id,class:"group relative overflow-hidden rounded border"},[r.kind==="image"?(d(),i("img",{key:0,src:r.url,alt:r.id.toString(),class:"h-20 w-full object-cover"},null,8,rt)):(d(),i("div",ot,[l(t(L),{class:"mr-1 h-4 w-4"}),e[34]||(e[34]=n(" Video ",-1))])),o("button",{type:"button",class:"absolute right-1 top-1 rounded bg-background/80 px-1 text-[10px] font-medium text-destructive shadow",onClick:m=>z(r.id)}," Remove ",8,lt)]))),128))])])):f("",!0),y.value.length?(d(),i("div",at,[e[36]||(e[36]=o("p",{class:"text-xs font-medium text-muted-foreground"},"New uploads (pending save)",-1)),o("div",dt,[(d(!0),i(v,null,b(y.value,r=>(d(),i("div",{key:r.url,class:"overflow-hidden rounded border"},[o("img",{src:r.url,alt:r.name,class:"h-20 w-full object-cover"},null,8,it)]))),128))])])):f("",!0)]),o("div",ut,[l(t(g),{for:"project-summary"},{default:u(()=>[...e[38]||(e[38]=[n("Summary (optional)",-1)])]),_:1}),C(o("textarea",{id:"project-summary","onUpdate:modelValue":e[5]||(e[5]=r=>t(s).summary=r),placeholder:"Short description for internal reference",rows:"3",class:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},null,512),[[S,t(s).summary]]),t(s).errors.summary?(d(),i("p",nt,p(t(s).errors.summary),1)):f("",!0)]),o("div",mt,[o("div",ft,[l(t(g),{for:"project-featured"},{default:u(()=>[...e[39]||(e[39]=[n("Featured",-1)])]),_:1}),e[40]||(e[40]=o("p",{class:"text-xs text-muted-foreground"},"Mark as featured to highlight on the public portfolio.",-1))]),o("input",{id:"project-featured",type:"checkbox",class:"h-4 w-4 rounded border-input text-primary focus-visible:ring-ring",checked:t(s).featured,onChange:e[6]||(e[6]=r=>t(s).featured=!t(s).featured)},null,40,pt)]),t(s).hasErrors?(d(),i("div",ct,[(d(!0),i(v,null,b(t(s).errors,(r,m)=>(d(),i("p",{key:m},p(r),1))),128))])):f("",!0)]),l(t(le),{class:"mt-4 flex items-center justify-end gap-2"},{default:u(()=>[l(t(k),{variant:"ghost",onClick:U},{default:u(()=>[...e[41]||(e[41]=[n("Cancel",-1)])]),_:1}),l(t(k),{disabled:t(s).processing,onClick:T},{default:u(()=>[t(s).processing?(d(),i("span",yt,"Saving…")):(d(),i("span",gt,"Save"))]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])],64))}});export{zt as default};
