import{m as I,r as m,ab as j,a8 as H,d as _,Q as K,ah as z,V as R,w as Y,x as Q,h as q,c as O,b as F,j as W,u as y,y as N}from"./app-BNk5Tten.js";
import{d as G,u as L}from"./index-sF3JAlrh.js";
import{g as C,c as U}from"./Presence-CC9Lr9XA.js";import{S as T,P}from"./Primitive-CjWR7Ema.js";
import{u as k}from"./useDirection-BfowJ6Bm.js";function x(){const e=m(),t=I(()=>["#text","#comment"].includes(e.value?.$el.nodeName)?e.value?.$el.nextElementSibling:G(e));return{primitiveElement:e,currentElement:t}}const M="data-reka-collection-item";function J(e={}){const{key:t="",isProvider:i=!1}=e,r=`${t}CollectionProvider`;let o;if(i){const n=m(new Map);o={collectionRef:m(),itemMap:n},j(r,o)}else o=H(r);const E=(n=!1)=>{const a=o.collectionRef.value;if(!a)return[];const s=Array.from(a.querySelectorAll(`[${M}]`)),c=Array.from(o.itemMap.value.values()).sort((f,p)=>s.indexOf(f.ref)-s.indexOf(p.ref));return n?c:c.filter(f=>f.ref.dataset.disabled!=="")},b=_({name:"CollectionSlot",setup(n,{slots:a}){const{primitiveElement:s,currentElement:d}=x();return Y(d,()=>{o.collectionRef.value=d.value}),()=>R(T,{ref:s},a)}}),A=_({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(n,{slots:a,attrs:s}){const{primitiveElement:d,currentElement:c}=x();return K(f=>{if(c.value){const p=z(c.value);o.itemMap.value.set(p,{ref:c.value,value:n.value}),f(()=>o.itemMap.value.delete(p))}}),()=>R(T,{...s,[M]:"",ref:d},a)}}),w=I(()=>Array.from(o.itemMap.value.values())),g=I(()=>o.itemMap.value.size);return{getItems:E,reactiveItems:w,itemMapSize:g,CollectionSlot:b,CollectionItem:A}}const X="rovingFocusGroup.onEntryFocus",Z={bubbles:!1,cancelable:!0},ee={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function te(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function ce(e,t,i){const r=te(e.key,i);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return ee[r]}function re(e,t=!1){const i=C();for(const r of e)if(r===i||(r.focus({preventScroll:t}),C()!==i))return}function fe(e,t){return e.map((i,r)=>e[(t+r)%e.length])}const[pe,oe]=U("RovingFocusGroup");var ae=_({__name:"RovingFocusGroup",props:{orientation:{type:String,required:!1,default:void 0},dir:{type:String,required:!1},loop:{type:Boolean,required:!1,default:!1},currentTabStopId:{type:[String,null],required:!1},defaultCurrentTabStopId:{type:String,required:!1},preventScrollOnEntryFocus:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["entryFocus","update:currentTabStopId"],setup(e,{expose:t,emit:i}){const r=e,o=i,{loop:E,orientation:b,dir:A}=Q(r),w=k(A),g=L(r,"currentTabStopId",o,{defaultValue:r.defaultCurrentTabStopId,passive:r.currentTabStopId===void 0}),n=m(!1),a=m(!1),s=m(0),{getItems:d,CollectionSlot:c}=J({isProvider:!0});function f(l){const v=!a.value;if(l.currentTarget&&l.target===l.currentTarget&&v&&!n.value){const h=new CustomEvent(X,Z);if(l.currentTarget.dispatchEvent(h),o("entryFocus",h),!h.defaultPrevented){const S=d().map(u=>u.ref).filter(u=>u.dataset.disabled!==""),V=S.find(u=>u.getAttribute("data-active")===""),B=S.find(u=>u.getAttribute("data-highlighted")===""),$=S.find(u=>u.id===g.value),D=[V,B,$,...S].filter(Boolean);re(D,r.preventScrollOnEntryFocus)}}a.value=!1}function p(){setTimeout(()=>{a.value=!1},1)}return t({getItems:d}),oe({loop:E,dir:w,orientation:b,currentTabStopId:g,onItemFocus:l=>{g.value=l},onItemShiftTab:()=>{n.value=!0},onFocusableItemAdd:()=>{s.value++},onFocusableItemRemove:()=>{s.value--}}),(l,v)=>(q(),O(y(c),null,{default:F(()=>[W(y(P),{tabindex:n.value||s.value===0?-1:0,"data-orientation":y(b),as:l.as,"as-child":l.asChild,dir:y(w),style:{outline:"none"},onMousedown:v[0]||(v[0]=h=>a.value=!0),onMouseup:p,onFocus:f,onBlur:v[1]||(v[1]=h=>n.value=!1)},{default:F(()=>[N(l.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}}),ve=ae,ne=_({__name:"VisuallyHidden",props:{feature:{type:String,required:!1,default:"focusable"},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(e){return(t,i)=>(q(),O(y(P),{as:t.as,"as-child":t.asChild,"aria-hidden":t.feature==="focusable"?"true":void 0,"data-hidden":t.feature==="fully-hidden"?"":void 0,tabindex:t.feature==="fully-hidden"?"-1":void 0,style:{position:"absolute",border:0,width:"1px",height:"1px",padding:0,margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",whiteSpace:"nowrap",wordWrap:"normal",top:"-1px",left:"-1px"}},{default:F(()=>[N(t.$slots,"default")]),_:3},8,["as","as-child","aria-hidden","data-hidden","tabindex"]))}}),me=ne;export{ve as R,me as V,x as a,re as f,ce as g,pe as i,J as u,fe as w};
